{"componentChunkName":"component---src-templates-blog-post-js","path":"/Login-Chat-Portfolio/","result":{"data":{"site":{"siteMetadata":{"title":"Hyoyeon Starter Blog"}},"markdownRemark":{"id":"d248168e-c8f9-5b44-a50d-8c4dee7f4e77","excerpt":"Login Chat Portfolio 📄 Google Portfolio.pdf Run frontend start npm start; backend start sever/ node index.js; Local setting 구글 클라우드 클라이언트에서 브라우저 요청에 사용 http…","html":"<h3>Login Chat Portfolio</h3>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/e4d68be1e07cc8144a5e9404af152667/38cea/image.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 139.24050632911394%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAACXBIWXMAABYlAAAWJQFJUiTwAAACtElEQVR42rWVXWsTQRSG87/EG6/8BYJ45YW3gjeCoFBtoWmCbVMoEYRSoTaJxhZjhYqIsVq0WrFJk02MtsQk5GOzm2abNibZj9eZ2d2y2c1Hm+LAy8zOzD5zzpyzZ10Y0rQhz/bmGgZUNQ3coYC3lSy2ayX8VeTRgBREWyCXwsVoAJc2QrgQXcYYtznQWtcwd2/uvMOdxAYeZr7Bnd7Cta+vUWg2ug49k8u3dz/g+vY6bsXe48b3N7i6tQah3dQPPAvQPH1TKDCXL38K48qXCIL5lGG9NlpQFAIO5dNISFU9INp5o9zH8pGBppWKqva8s4FA+oL5knWsEtje/j6azWbXmlU9gYqiotORiTqQZQWyorBxm4jO03VV1XrKhHYBW60WisUi8vkCRLGGQqGACs+zcb80MeepFw4gnaSilijEOmqlboFqkf1ZV08Le1khy/LJ6VZLTh1l85LNFwVBQHw3gZ+ZDBJJDtnsn4HuO1y2btTBmhEkWQ+UYfGpXG63OyiVyiQwJZTLek9hQ2umcXAXUDPuq9E4wkG9jrokQZIOGZAFiMgMlKI41Tco520u6wXvZ3P4EUsilkgRcayP0/Euh514Ejukjxtzccsal/7FPk0HcPHpc9yb8GLCO4dxj4+Jjien5+Hx+eGde9S1RnXfPYOpWT8aR8dO4MJSCHfHPWzjg6lZJjr2+RfwJBDG48VlBqQQc31schrumXkCPHICox8/Yym4gmerawitvELwRQQhItoHwi+ZgsYzWyN7AuEIVtfWSYa0/2NQTtKm1YC49xutDklWTWXpI9RqqB3UwfNVlEhu8tUqRDIniCJLLVpwaUo5igMDtiXE9jgc69azzy6Xz7MKRKsOrUKVCk/mRQaXCHBotdGM6myt0JpVZkE1IPa9Lvuf2P4t96vQ9kpt3uE/bxFVF9E1X/0AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"alt text\" title=\"\" src=\"/static/e4d68be1e07cc8144a5e9404af152667/f058b/image.png\" srcset=\"/static/e4d68be1e07cc8144a5e9404af152667/c26ae/image.png 158w,\n/static/e4d68be1e07cc8144a5e9404af152667/6bdcf/image.png 315w,\n/static/e4d68be1e07cc8144a5e9404af152667/f058b/image.png 630w,\n/static/e4d68be1e07cc8144a5e9404af152667/38cea/image.png 678w\" sizes=\"(max-width: 630px) 100vw, 630px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<h4><a href=\"./Login Chat.pdf\">📄 Google Portfolio.pdf</a></h4>\n<hr>\n<h5>Run</h5>\n<ul>\n<li>frontend start\n<ul>\n<li>npm start;</li>\n</ul>\n</li>\n<li>backend start\n<ul>\n<li>sever/ node index.js;</li>\n</ul>\n</li>\n</ul>\n<h5>Local setting</h5>\n<ul>\n<li>구글 클라우드 클라이언트에서\n<ul>\n<li>브라우저 요청에 사용 <a href=\"http://localhost:3000\">http://localhost:3000</a></li>\n<li>.env local 환경 세팅 : REACT_APP_REDIRECT_URL=<a href=\"http://localhost:3000\">http://localhost:3000</a></li>\n</ul>\n</li>\n<li>chat.js에서 socket = new WebSocket(\"ws://localhost:3001\");</li>\n</ul>\n<h5>Aws Amplify deploy</h5>\n<ol>\n<li>create new app</li>\n<li>github link</li>\n<li>commit 하면 자동 배포</li>\n<li>domain : <a href=\"https://main.d3j4dwe7mj38lf.amplifyapp.com/\">https://main.d3j4dwe7mj38lf.amplifyapp.com/</a></li>\n</ol>\n<hr>\n<h4>EC2 create instance</h4>\n<ol>\n<li>create instance / Amazon Linux2023/ t2.micro</li>\n<li>키 페어 다운로드 (.pem 파일 저장)</li>\n<li>서버 코드에서 localhost 대신 0.0.0.0으로 변경!</li>\n<li>Inbound rules (인바운드 규칙) 수정</li>\n<li>새 규칙 추가\n<ol>\n<li>Type: Custom TCP\nPort Range: 3001\nSource: Anywhere (0.0.0.0/0)</li>\n</ol>\n</li>\n<li><a href=\"http://3.89.60.14:3001\">http://3.89.60.14:3001</a></li>\n</ol>\n<hr>\n<h3>서버 빌드</h3>\n<h4>SSH로 EC2 접속하기 (터미널에서 실행)</h4>\n<p><strong>ssh -i /Users/hyoyeon/Downloads/my-key.pem <a href=\"mailto:ec2-user@3.89.60.14\">ec2-user@3.89.60.14</a></strong></p>\n<ol>\n<li>ec2-user → Amazon Linux 기본 사용자 이름</li>\n<li>3.89.60.14 → EC2 퍼블릭 IP (사용자마다 다름!)</li>\n<li>If error\n<ol>\n<li>\"Permission denied (publickey)\" 오류 발생하면?\n<ol>\n<li>chmod 400 /Users/hyoyeon/Downloads/my-key.pem</li>\n</ol>\n</li>\n<li>\"No such file or directory\" 오류 발생하면?\n<ol>\n<li>키 파일 이름이 정확한지 확인!</li>\n</ol>\n</li>\n</ol>\n</li>\n</ol>\n<hr>\n<h4>EC2 인스턴스에 SSH로 접속 한 후 현재 사용자의 홈 디렉토리 경로 확인</h4>\n<ol>\n<li>echo $HOME --->/home/ec2-user</li>\n</ol>\n<hr>\n<h4>로컬 프로젝트를 EC2에 업로드 하기</h4>\n<p>scp -i /Users/hyoyeon/Downloads/my-ec2-key.pem -r /Users/hyoyeon/login-chat <a href=\"mailto:ec2-user@3.89.60.14\">ec2-user@3.89.60.14</a>:/home/ec2-user/</p>\n<blockquote>\n<ul>\n<li>-i /Users/hyoyeon/Downloads/my-ec2-key.pem\nEC2에 접속할 때 사용하는 SSH 키 파일을 지정 / 이 키(.pem 파일)가 있어야 EC2에 접속 가능</li>\n<li>-r /Users/hyoyeon/login-chat\n로컬 컴퓨터에 있는 login-chat 폴더를 포함한 모든 파일을 업로드\n-r 옵션은 **폴더를 재귀적으로 업로드(하위 파일 포함)**하도록 해줌</li>\n<li><a href=\"mailto:ec2-user@3.89.60.14\">ec2-user@3.89.60.14</a>:/home/ec2-user/\nEC2 서버의 로그인 계정 (ec2-user)\nEC2의 IP 주소 (3.89.60.14)\n업로드할 경로 (/home/ec2-user/)\n즉, EC2의 /home/ec2-user/ 폴더 안에 login-chat 폴더가 생성</li>\n</ul>\n</blockquote>\n<ul>\n<li>만약 scp~~~ 하다가 중간에 실패 경우\n<ul>\n<li>rsync 사용하여 전송 재개\nscp는 중단된 부분을 이어서 복사할 수 없지만, <strong>rsync</strong>는 이전에 복사된 파일을 건너뛰고 중단된 부분부터 이어서 복사할 수 있어. 이 방법을 사용해보자!</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">rsync -avz -e \"ssh -i /Users/hyoyeon/Downloads/my-ec2-key.pem\" /Users/hyoyeon/login-chat/ ec2-user@3.89.60.14:/home/ec2-user/login-chat/</code></pre></div>\n<ul>\n<li>EC2에서 프로젝트 확인\n<blockquote>\n<p>cd /home/ec2-user\nls # login-chat 폴더가 있는지 확인\ncd login-chat</p>\n</blockquote>\n</li>\n<li>프로젝트 의존성 설치\n<blockquote>\n<p>npm install</p>\n</blockquote>\n</li>\n<li>서버 실행\n<blockquote>\n<p>node server.js [나의 플젝 경우는 server 폴더 안에 index.js]\n✅ EC2 퍼블릭 IP로 접속 (<a href=\"http://3.89.60.14:3001\">http://3.89.60.14:3001</a>) → 서버 정상 작동 확인 🚀</p>\n</blockquote>\n</li>\n</ul>\n<blockquote>\n<p>서버 실행 코드\nssh -i /Users/hyoyeon/Downloads/my-key.pem <a href=\"mailto:ec2-user@3.89.60.14\">ec2-user@3.89.60.14</a>\ncd login-chat\ncd server\nnode index.js</p>\n</blockquote>\n<hr>\n<h4>EC2에 로컬 프로젝트 올리는 순서</h4>\n<p>1️⃣ EC2 인스턴스 생성 (Amazon Linux 2, 보안 그룹 설정)\n2️⃣ EC2에 SSH 접속\n3️⃣ 로컬 프로젝트 EC2로 업로드 (scp 사용)\n4️⃣ EC2에서 프로젝트 확인 (cd login-chat)\n5️⃣ Node.js &#x26; npm 설치\n6️⃣ 프로젝트 의존성 설치 (npm install)\n7️⃣ 서버 실행 (node server.js)\n8️⃣ EC2 퍼블릭 IP로 접속하여 확인 (http://&#x3C;EC2_IP>:3001)</p>\n<hr>\n<h3>클라이언트 빌드</h3>\n<ol>\n<li>\n<p>터미널에서 프론트엔드 폴더로 이동\ncd /Users/hyoyeon/login-chat</p>\n</li>\n<li>\n<p>React 프로젝트 빌드 실행\nnpm run build</p>\n</li>\n<li>\n<p>build 폴더가 생성됨 (이걸 EC2에 올린다)</p>\n</li>\n<li>\n<p>EC2에 build 폴더 전송\nscp -i /Users/hyoyeon/Downloads/my-ec2-key.pem -r /Users/hyoyeon/login-chat/build <a href=\"mailto:ec2-user@3.89.60.14\">ec2-user@3.89.60.14</a>:/home/ec2-user/login-chat/\n✅ EC2에 /home/ec2-user/login-chat/build 폴더가 업로드됨!</p>\n</li>\n<li>\n<p>Nginx 설정 변경 방법 (EC2에서 실행)\n1️⃣ EC2에 접속하기\nssh -i /Users/hyoyeon/Downloads/my-ec2-key.pem <a href=\"mailto:ec2-user@3.89.60.14\">ec2-user@3.89.60.14</a>\n2️⃣ Nginx 설정 파일 열기\nsudo nano /etc/nginx/nginx.conf\n3️⃣ 파일 안에서 server { ... } 부분을 찾아서 아래처럼 수정하기\nserver {\nlisten 80;\nserver_name 3.89.60.14;</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">location / {\n    root /home/ec2-user/login-chat/build;\n    index index.html;\n    try_files $uri /index.html;\n}\n\nlocation /api/ {\n    proxy_pass http://localhost:3001/;\n}</code></pre></div>\n<p>}\n🔹 location / {} → React(프론트엔드) 빌드 파일 제공\n🔹 location /api/ {} → Node.js 서버(백엔드)로 API 요청 전달\n설정 저장하고 나가기\nCtrl + X → Y → Enter</p>\n</li>\n<li>\n<p>Nginx 설정 파일에 문법 오류가 없는지 확인하려면 아래 명령어를 실행\nsudo nginx -t</p>\n</li>\n<li>\n<p>Nginx 재시작\n설정이 정상이라면, Nginx를 재시작하여 변경 사항을 적용\nsudo systemctl restart nginx</p>\n</li>\n</ol>","frontmatter":{"title":"GoogleOauth Login Chat Portfolio","date":"February 22, 2025","description":null}},"previous":{"fields":{"slug":"/python/"},"frontmatter":{"title":"python"}},"next":{"fields":{"slug":"/loginChat_note/"},"frontmatter":{"title":"Login chat note"}}},"pageContext":{"id":"d248168e-c8f9-5b44-a50d-8c4dee7f4e77","previousPostId":"eaa85917-7ece-55c6-960f-27e2cb8f95b2","nextPostId":"cda4fe03-91ac-597f-9d2e-c3dc357364f1"}},"staticQueryHashes":["2841359383","3257411868"],"slicesMap":{}}